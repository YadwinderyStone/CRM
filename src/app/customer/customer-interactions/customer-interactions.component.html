
<div class="page-header-main">
    <div class="row align-items-center justify-content-between">
        <div class="col-md-auto col-sm-auto col">
            <div class="content-header">
                <h1>{{'INTERACTIONS' | translate}}</h1>
            </div>
        </div>
        <!-- <div *hasClaim="'INT_ADD_INTERACTION'" class="col-md-auto col-sm-auto col-auto">
            <button class="btn blue-btn btn-sm m-right-10" routerLink="add-interactions">
                <i class="fas fa-plus"></i> Add Interactions
            </button>
        </div> -->
    </div>
</div>
<div class="loading-shade" *ngIf="isLoading">
    <mat-spinner></mat-spinner>
</div>
<div class="table-responsive" *ngIf="!isLoading">
    <div class="table table-bordered table-hover table_height">
        <table mat-table [dataSource]="customerInteractions" matSort multiTemplateDataRows matSortActive="productName">
            <ng-container matColumnDef="action">
                <th class="table-column-150" mat-header-cell *matHeaderCellDef> Action
                </th>
                <td class="table-column-150" mat-cell *matCellDef="let element">
                    <!-- <button *hasClaim="['INT_ADD_INTERACTION','INT_UPDATE_INTERACTION']"
                        class="btn btn-success btn-sm m-right-10" type="button">
                        <i class="las la-pen"></i>
                        {{'EDIT' | translate}}
                    </button> -->
                    <button *hasClaim="'INT_DELETE_INTERACTION'"
                        class="btn btn-danger btn-sm" type="button" (click)="deleteInteraction(element)" >
                        <i class="las la-trash"></i>
                        {{'DELETE' | translate}}
                    </button>
                </td>
            </ng-container>
            <ng-container matColumnDef="interactionid">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>Interaction ID</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.transactionNumber}} </td>
                <!-- <td class="table-column-200" mat-cell *matCellDef="let row"> {{row }} </td> -->
            </ng-container>
            <ng-container matColumnDef="interactiontype">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>Interaction Type</th>
                <td class="table-column-200" [ngClass]="row?.interactionTicketType=='FCR'?'fcr':'ticket-closed'" mat-cell *matCellDef="let row"> {{row.interactionTicketType}} </td>
            </ng-container>
            <ng-container matColumnDef="assignto">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>Assign To</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.assignToName}} </td>
            </ng-container>
            <ng-container matColumnDef="contant">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>Contact Name</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.contactName}} </td>
            </ng-container>
            <ng-container matColumnDef="createdteam">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>Team
                </th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row?.teamName}} </td>
            </ng-container>
            <ng-container matColumnDef="status">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>
                    Interaction Status
                </th>
                <td class="table-column-150" [ngClass]="row?.statusName=='CLOSED'?'closed':(row?.statusName=='OPEN'||row?.statusName=='Open'?'open':row?.statusName=='PENDING'?'pending':'resolved')" mat-cell *matCellDef="let row"> <span class="text-uppercase">{{row?.statusName}}</span></td>
            </ng-container>
            <ng-container matColumnDef="substatus">
                <th class="table-column-250" mat-header-cell *matHeaderCellDef mat-sort-header>Interaction Sub status</th>
                <td class="table-column-250" mat-cell *matCellDef="let row"> {{row?.subStatusName}}
                </td>
            </ng-container>
            <ng-container matColumnDef="category">
                <th class="table-column-400" mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                <td class="table-column-400" mat-cell *matCellDef="let row"> {{row?.categoryName}}
                </td>
            </ng-container>
            <ng-container matColumnDef="subcatagory">
                <th class="table-column-400" mat-header-cell *matHeaderCellDef mat-sort-header> Sub Category</th>
                <td class="table-column-400" mat-cell *matCellDef="let row"> {{row.subCategoryName}}
                </td>
            </ng-container>
            <ng-container matColumnDef="problemreported1">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header> Problem Reported 1</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.problemReported}}
                </td>
            </ng-container>
            <ng-container matColumnDef="docketno">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header> Docket Number</th>
                <td class="table-column-200" mat-cell *matCellDef="let row">{{row?.docketNumber}}
                </td>
            </ng-container>
            <ng-container matColumnDef="uniquenumber">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header> Unique Number</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.uniqueNumber}}
                </td>
            </ng-container>
            <ng-container matColumnDef="gstn">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>GSTN</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.gstn}}
                </td>
            </ng-container>
            <ng-container matColumnDef="lastresolveat">
                <th class="table-column-200" mat-header-cell *matHeaderCellDef mat-sort-header>Created At</th>
                <td class="table-column-200" mat-cell *matCellDef="let row"> {{row.createdAt}}
                </td>
            </ng-container>

            <!-- <ng-container matColumnDef="action-search">
                <th class="pr-5" mat-header-cell *matHeaderCellDef> </th>
            </ng-container>
            <ng-container matColumnDef="productName-search">
                <th mat-header-cell *matHeaderCellDef>
                    <input type="text" class="form-control w-90" [(ngModel)]="ProductNameFilter">
                </th>
            </ng-container>
            <ng-container matColumnDef="stock-search">
                <th class="pr-5" mat-header-cell *matHeaderCellDef> </th>
            </ng-container>
            <ng-container matColumnDef="averagePurchasePrice-search">
                <th class="pr-5" mat-header-cell *matHeaderCellDef> </th>
            </ng-container>
            <ng-container matColumnDef="averageSalesPrice-search">
                <th class="pr-5" mat-header-cell *matHeaderCellDef> </th>
            </ng-container> -->
            <ng-container matColumnDef="footer">
                <td mat-footer-cell colspan="5" *matFooterCellDef>
                    <mat-paginator [(pageSize)]="this.pageSize" [length]="totalCount"
                        [pageSizeOptions]="[10, 20, 30]" (page)="pageChange($event.pageIndex, $event.pageSize)" >
                    </mat-paginator>
                </td>
            </ng-container>
            <ng-container *ngIf="customerInteractions?.length === 0 && !isLoading" matColumnDef="no-records">
                <td mat-footer-cell colspan="5" *matFooterCellDef>
                    <b> {{'NO_DATA_FOUND' | translate}}</b>
                </td>
            </ng-container>
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let inventoryObject" [attr.colspan]="displayedColumns.length">
                    <ng-container *ngIf="inventoryObject == expandedElement">
                        <div class="example-element-detail"
                            [@detailExpand]="inventoryObject == expandedElement ? 'expanded' : 'collapsed'">
                            <div class="inner-table mat-elevation-z8">
                                <app-inventory-history-list [inventory]="inventoryObject">
                                </app-inventory-history-list>
                            </div>
                        </div>
                    </ng-container>
                </td>
            </ng-container>
            <tr *matNoDataRow>
              <td colspan="9">
                  <span class="p-4 mt-4">
                      <b> {{'NO_DATA_FOUND' | translate}}</b>
                  </span>
              </td>
          </tr>
            <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            <!-- <tr mat-header-row
                *matHeaderRowDef="['action-search','productName-search','stock-search','averagePurchasePrice-search','averageSalesPrice-search'];sticky: true"
                class="example-second-header-row"> </tr> -->
            <tr mat-footer-row *matFooterRowDef="columnsToDisplay;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        </table>
    </div>
</div>
